<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: SearchEngines::SearchEngineBuilder
  
    &mdash; TenBlueLinks
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "SearchEngines::SearchEngineBuilder";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../SearchEngines.html" title="SearchEngines (module)">SearchEngines</a></span></span>
     &raquo; 
    <span class="title">SearchEngineBuilder</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: SearchEngines::SearchEngineBuilder
  <span class="abstract note title">Abstract</span>
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><a href="https://docs.ruby-lang.org/en/2.3.0/Object.html">Object</a></span>
      
        <ul class="fullTree">
          <li><a href="https://docs.ruby-lang.org/en/2.3.0/Object.html">Object</a></li>
          
            <li class="next">SearchEngines::SearchEngineBuilder</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>HTTParty</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/dsl.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This class is abstract.</strong>
  <div class='inline'></div>
</div>

<p>A class that your search engine should inherit from. This is the base class for all search engines. By default, this class provides a robust DSL you can use to craft the different pieces of your search engine that must come together to satisfy the requirements of the default <span class='object_link'><a href="#search-instance_method" title="SearchEngines::SearchEngineBuilder#search (method)">#search</a></span> method. However, you may redefine the <span class='object_link'><a href="#search-instance_method" title="SearchEngines::SearchEngineBuilder#search (method)">#search</a></span> method to suit your needs, as long as it takes a <span class='object_link'><a href="../QueryBuilder.html" title="QueryBuilder (class)">QueryBuilder</a></span> as an argument and returns an array of <span class='object_link'><a href="../Result.html" title="Result (class)">Result</a></span>s. Please especially review the implementation of the <span class='object_link'><a href="#search-instance_method" title="SearchEngines::SearchEngineBuilder#search (method)">#search</a></span> method.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="../SearchEngines.html#add-class_method" title="SearchEngines.add (method)">add</a></span></li>
    
  </ul>
<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>Shreyan Jain</p>
</div>
      
    </li>
  
</ul>

</div>



  <h2>Class Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#engine_name-class_method" title="engine_name (class method)">.<strong>engine_name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute engine_name.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#config-class_method" title="config (class method)">.<strong>config</strong>(*args)  &#x21d2; Struct, OpenStruct </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Makes your search engine have explicit configuration options.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#endpoint-class_method" title="endpoint (class method)">.<strong>endpoint</strong>(string)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Defines an endpoint method that returns the given string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#query-class_method" title="query (class method)">.<strong>query</strong>(&amp;block)  &#x21d2; :query </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Defines a method that takes a block as an argument and assigns it as the implementation of the ‘query` method.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#results-class_method" title="results (class method)">.<strong>results</strong>(*results_key, &amp;result_mapping)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Specify the key of the json/xml/whatever response in which the array of results will be located.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#map_result-instance_method" title="#map_result (instance method)">#<strong>map_result</strong>(item)  &#x21d2; Result </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Maps a single result.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#map_results-instance_method" title="#map_results (instance method)">#<strong>map_results</strong>(response)  &#x21d2; Array&lt;Result&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Maps the results of a response.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search-instance_method" title="#search (instance method)">#<strong>search</strong>(query_builder)  &#x21d2; Array&lt;Result&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Searches the configured search engine with the given query.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  <div id="class_attr_details" class="attr_details">
    <h2>Class Attribute Details</h2>
    
      
      <span id="engine_name=-class_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="engine_name-class_method">
  
    .<strong>engine_name</strong>  &#x21d2; <tt><a href="https://docs.ruby-lang.org/en/2.3.0/Object.html">Object</a></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute engine_name.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


119
120
121</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dsl.rb', line 119</span>

<span class='kw'>def</span> <span class='id identifier rubyid_engine_name'>engine_name</span>
  <span class='ivar'>@engine_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="config-class_method">
  
    .<strong>config</strong>(*args)  &#x21d2; <tt><a href="https://docs.ruby-lang.org/en/2.3.0/Struct.html">Struct</a></tt>, <tt><a href="https://docs.ruby-lang.org/en/2.3.0/OpenStruct.html">OpenStruct</a></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Makes your search engine have explicit configuration options. This way, you do not have to rely on environment variables, and instead can rely on conventions in the ‘conf.lua` file. You specify the different configuration options in the first call, and then you can access them in subsequent calls, like this:</p>

<pre class="code ruby"><code class="ruby">-- conf.lua
engines = {
  Bing = {
    api_key = &quot;some_ugly_api_key&quot;
  }
}
</code></pre>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../SearchEngines.html" title="SearchEngines (module)">SearchEngines</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add'><span class='object_link'><a href="../SearchEngines.html#add-class_method" title="SearchEngines.add (method)">add</a></span></span> <span class='symbol'>:Bing</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_config'>config</span> <span class='symbol'>:api_key</span> <span class='comment'># Makes the `api_key` option available
</span>  <span class='id identifier rubyid_headers'>headers</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ocp-Apim-Subscription-Key</span><span class='label_end'>&quot;:</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_api_key'>api_key</span> <span class='comment'># Accesses the `api_key` option from `conf.lua`
</span> <span class='kw'>end</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt><a href="https://docs.ruby-lang.org/en/2.3.0/Array.html">Array</a>&lt;<a href="https://docs.ruby-lang.org/en/2.3.0/Symbol.html">Symbol</a>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The names of the configuration options.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><a href="https://docs.ruby-lang.org/en/2.3.0/Struct.html">Struct</a></tt>, <tt><a href="https://docs.ruby-lang.org/en/2.3.0/OpenStruct.html">OpenStruct</a></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


175
176
177
178
179
180
181</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dsl.rb', line 175</span>

<span class='kw'>def</span> <span class='id identifier rubyid_config'>config</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='ivar'>@config_struct</span> <span class='op'>=</span> <span class='const'>Struct</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='lparen'>(</span><span class='ivar'>@config_struct</span> <span class='op'>||</span> <span class='const'>OpenStruct</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='op'>**</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../top-level-namespace.html#Config-constant" title="Config (constant)">Config</a></span></span><span class='lbracket'>[</span><span class='symbol'>:engines</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_engine_name'>engine_name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="endpoint-class_method">
  
    .<strong>endpoint</strong>(string)  &#x21d2; <tt><a href="https://docs.ruby-lang.org/en/2.3.0/Object.html">Object</a></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Defines an endpoint method that returns the given string. This is the endpoint of your search engine’s API that HTTParty will call.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


115
116
117</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dsl.rb', line 115</span>

<span class='kw'>def</span> <span class='id identifier rubyid_endpoint'>endpoint</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='symbol'>:endpoint</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_string'>string</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="query-class_method">
  
    .<strong>query</strong>(&amp;block)  &#x21d2; <tt>:query</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Defines a method that takes a block as an argument and assigns it as the implementation of the ‘query` method.</p>

<p>Pass it a block that takes a <span class='object_link'><a href="../QueryBuilder.html" title="QueryBuilder (class)">QueryBuilder</a></span> as an input, and returns a hash which will be encoded in the URI query string as GET params.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../SearchEngines.html" title="SearchEngines (module)">SearchEngines</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add'><span class='object_link'><a href="../SearchEngines.html#add-class_method" title="SearchEngines.add (method)">add</a></span></span> <span class='symbol'>:Bing</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_query'>query</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_builder'>builder</span><span class='op'>|</span>
    <span class='lbrace'>{</span>
      <span class='label'>q:</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='label'>mkt:</span> <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_market'>market</span><span class='comma'>,</span>
      <span class='label'>SafeSearch:</span> <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_safesearch'>safesearch</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>strict</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>moderate</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='label'>offset:</span> <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_offset'>offset</span><span class='comma'>,</span>
      <span class='label'>count:</span> <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt><a href="https://docs.ruby-lang.org/en/2.3.0/Proc.html">Proc</a></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The block to be assigned as the implementation of the ‘query` method.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>:query</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(because it’s a method definition)</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


139
140
141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dsl.rb', line 139</span>

<span class='kw'>def</span> <span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='symbol'>:query</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="results-class_method">
  
    .<strong>results</strong>(*results_key, &amp;result_mapping)  &#x21d2; <tt><a href="https://docs.ruby-lang.org/en/2.3.0/Object.html">Object</a></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Specify the key of the json/xml/whatever response in which the array of results will be located.</p>

<p>This allows you to parse the json/xml/whatever results into a <span class='object_link'><a href="../Result.html" title="Result (class)">Result</a></span> object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>results_key</span>
      
      
        <span class='type'>(<tt><a href="https://docs.ruby-lang.org/en/2.3.0/Array.html">Array</a></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the key in the response, which can be nested several levels deep by passing multiple arguments, in the order of nesting.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>result_mapping</span>
      
      
        <span class='type'>(<tt><a href="https://docs.ruby-lang.org/en/2.3.0/Proc.html">Proc</a></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A block that will evaluate each item in the array and returns a <span class='object_link'><a href="../Result.html" title="Result (class)">Result</a></span>. Evaluated in the context of a <span class='object_link'><a href="ResultMapper.html" title="SearchEngines::ResultMapper (class)">ResultMapper</a></span>.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="ResultMapper.html" title="SearchEngines::ResultMapper (class)">ResultMapper</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153
154</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dsl.rb', line 151</span>

<span class='kw'>def</span> <span class='id identifier rubyid_results'>results</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_results_key'>results_key</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_result_mapping'>result_mapping</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='symbol'>:results_key</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_results_key'>results_key</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='symbol'>:result_mapping</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_result_mapping'>result_mapping</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="map_result-instance_method">
  
    #<strong>map_result</strong>(item)  &#x21d2; <tt><span class='object_link'><a href="../Result.html" title="Result (class)">Result</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Maps a single result.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>item</span>
      
      
        <span class='type'>(<tt><a href="https://docs.ruby-lang.org/en/2.3.0/Hash.html">Hash</a></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The item to map.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Result.html" title="Result (class)">Result</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The mapped result.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


209
210
211
212
213
214
215</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dsl.rb', line 209</span>

<span class='kw'>def</span> <span class='id identifier rubyid_map_result'>map_result</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_result_mapping'>result_mapping</span>
    <span class='const'><span class='object_link'><a href="ResultMapper.html" title="SearchEngines::ResultMapper (class)">ResultMapper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="ResultMapper.html#initialize-instance_method" title="SearchEngines::ResultMapper#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_result_mapping'>result_mapping</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'><span class='object_link'><a href="ResultMapper.html#map-instance_method" title="SearchEngines::ResultMapper#map (method)">map</a></span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You must define a `result_mapping` block. Please read the docs for more info.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="map_results-instance_method">
  
    #<strong>map_results</strong>(response)  &#x21d2; <tt><a href="https://docs.ruby-lang.org/en/2.3.0/Array.html">Array</a>&lt;<span class='object_link'><a href="../Result.html" title="Result (class)">Result</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Maps the results of a response.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>response</span>
      
      
        <span class='type'>(<tt>HTTParty::Response</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The HTTP response from calling the defined endpoint. Should contain a ‘results` key you want to map.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><a href="https://docs.ruby-lang.org/en/2.3.0/Array.html">Array</a>&lt;<span class='object_link'><a href="../Result.html" title="Result (class)">Result</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An array of mapped results if result_mapping is defined.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


197
198
199
200
201
202
203
204</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dsl.rb', line 197</span>

<span class='kw'>def</span> <span class='id identifier rubyid_map_results'>map_results</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result_data'>result_data</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_dig'>dig</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_results_key'>results_key</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_result_mapping'>result_mapping</span>
    <span class='id identifier rubyid_result_data'>result_data</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span> <span class='id identifier rubyid_map_result'>map_result</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You must define a `result_mapping` block. Please read the docs for more info.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="search-instance_method">
  
    #<strong>search</strong>(query_builder)  &#x21d2; <tt><a href="https://docs.ruby-lang.org/en/2.3.0/Array.html">Array</a>&lt;<span class='object_link'><a href="../Result.html" title="Result (class)">Result</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Searches the configured search engine with the given query. When adding your own search engine, you may redefine this, as long as it works with the appropriate types. In order to map the results, use the ‘result_mapping` block.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>query_builder</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../QueryBuilder.html" title="QueryBuilder (class)">QueryBuilder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The query builder you are searching with.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><a href="https://docs.ruby-lang.org/en/2.3.0/Array.html">Array</a>&lt;<span class='object_link'><a href="../Result.html" title="Result (class)">Result</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An array of search results (depends on the search engine).</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


190
191
192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dsl.rb', line 190</span>

<span class='kw'>def</span> <span class='id identifier rubyid_search'>search</span><span class='lparen'>(</span><span class='id identifier rubyid_query_builder'>query_builder</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_map_results'>map_results</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_endpoint'>endpoint</span><span class='comma'>,</span> <span class='label'>query:</span> <span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_query_builder'>query_builder</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Oct 15 18:01:33 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-3.2.2).
</div>

    </div>
  </body>
</html>